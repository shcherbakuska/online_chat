_**«Разработка Веб-сервиса»**_

1.1 Архитектура

Проект состоит из следующих служб: \n
**Микросервис website (FastApi)** - предоставляет сервисную часть для управления пользователями и чатами. Основные компоненты:
−	main.py: главный файл, обеспечивающий регистрацию, аутентификацию, поиск, создание и удаление чат-комнат через эндпоинты вхождения посредством Fastapi;
−	database.py: взаимодействует с базой данных, создаваемой посредством PostgreSQL, через ORM (SQLAlchemy);
−	auth.py: генерирует JWT токены для аутентификации, верифицирует вводимые данные пользователя с захэшированными значениями из базы данных.
**Микросервис chat (WebSocket)** - поддерживает WebSocket соединения для реального обмена сообщениями, проверяет подлинность пользователей через JWT токены, а также организует трансляцию сообщений всем пользователям, подключенным к одной комнате.
**Frontend (Jinja2)** - поддерживает формы представления страниц регистрации, аутентификации и интерфейс чатов для пользователей.
**База данных (PostgreSQL)** – хранит информацию о пользователях и чат-комнатах для дальнейшего отображения на панель администратора.
**Nginx** - используется для проксирования HTTP запросов к website и WebSocket подключений к chat.
**Docker** – позволяет завернуть все микросервисы (website, chat и база данных) в контейнеры. Docker Compose обеспечивает лёгкий запуск проекта.
1.2	Структура базы данных
База данных Postgresql состоит из таблиц users и chats. Структура таблицы users:
−	email: почта пользователя (PK, индексированный);
−	username: имя пользователя;
−	hashed_password: хэшированный пароль.
Структура таблицы chats:
−	id: уникальный идентификатор комнаты (PK, индексированный);
−	name: название комнаты;
−	owner_id: id пользователя, создавшего комнату (FK → users.email).
1.3	Описание протоколов
REST API использует JSON для обмена данными между сервером и клиентом, при этом взаимодействие осуществляется через стандартный HTTP-протокол.
1.4	Описание API
API для микросервиса website:
−	GET /: отображение стартовой страницы;
−	GET /register: отображение страницы регистрации;
−	POST /register: регистрация пользователя;
−	GET /login: отображение страницы аутентификации;
−	POST /login: аутентификация пользователя;
−	GET /logout: выход пользователя из системы;
−	GET /user: личный кабинет;
−	POST /user/rooms: создание новой чат-комнаты;
−	DELETE /user/rooms/delete/{room_name}: удаление чат-комнаты;
−	GET /user/search: поиск нужной чат-комнаты по имени;
−	GET /user/search/results: результат поиска чат-комнаты;
−	GET /chat/{room_name}: отображение чат-комнаты.
API для микросервиса chat:
−	WebSocket /ws/chat/{room_name}: подключение к комнате и обмен сообщениями.

Структура проекта:

|        Имя файла               |                 Описание                                                                 |
| :----------------------------: | :---------------------------------------------------------------------------------------:|
| docker-compose.yml	         | Файл для запуска всех сервисов через Docker                                              |
|   README.md                    | Документация проекта                                                                     |
| .gitignore	                 | Исключения для Git, чтобы избежать добавления лишних файлов в репозиторий                |
|.dockerignore	                 | Исключения для Docker, чтобы не копировать ненужные файлы в образ                        |
|website/	                     | Микросервис управления пользователями и чат-комнатами                                    |
|website/Dockerfile              | Docker-файл для сборки образа микросервиса website                                       |
|website/main.py                 | Основной файл приложения FastAPI для управления пользователями                           |
|website/requirements.txt	     | Список зависимостей Python для микросервиса website                                      |
|website/__init__.py	         | Инициализационный файл Python для микросервиса                                           |
|website/auth/	                 | Модуль аутентификации                                                                    |
|website/auth/__init__.py	     | Инициализационный файл Python для модуля auth                                            |
|website/auth/auth.py	         | Модуль для работы с аутентификацией через JWT и OAuth2PasswordBearer                     |
|website/database/	             | Логика работы с базой данных                                                             |
|website/database/__init__.py    |	Инициализационный файл Python для модуля database                                       |
|website/database/database.py    |	Модели SQLAlchemy и взаимодействие с базой данных PostgreSQL                            |
|website/templates/	             | Jinja2-шаблоны для фронтенда                                                             |
|website/templates/start.html    | Фронтенд стартовой страницы                                                              |
|website/templates/register.html | Фронтенд страницы регистрации                                                            |
|website/templates/login.html	 | Фронтенд страницы входа                                                                  |
|website/templates/user.html	 | Фронтенд пользовательской страницы с возможностью создания и удаления чатов              |
|website/templates/search.html	 | Фронтенд страницы поиска чатов                                                           | 
|website/templates/chat.html	 | Фронтенд страницы чата с подключением WebSocket                                          |
|chat/	                         | Микросервис WebSocket-чата                                                               |
|chat/Dockerfile	             | Docker-файл для сборки образа микросервиса chat                                          |
|chat/requirements.txt	         | Список зависимостей Python для микросервиса chat                                         |
|chat/__init__.py	             | Инициализационный файл Python для микросервиса chat                                      |
|chat/main.py	                 | Основной файл приложения с логикой управления подключениями WebSocket                    |
|chat/database/	                 | Логика работы с базой данных для микросервиса chat                                       |
|chat/database/__init__.py	     | Инициализационный файл Python для модуля database                                        |
|chat/database/database.py	     | Модели SQLAlchemy и взаимодействие с базой данных PostgreSQL                             |
|db/	                         | Конфигурация базы данных (создается самостоятельно при первом запуске контейнера)        |
|nginx/	                         | Конфигурация веб-сервера Nginx                                                           |
|nginx/nginx.conf	             | Основной конфигурационный файл Nginx                                                     |
|nginx/Dockerfile	             | Docker-файл для сборки образа Nginx                                                      |


Автор: Щерба Анна Андреевна
